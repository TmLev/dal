name: "Back end"

on: [push]

jobs:
  main:
    name: "Build, tests, style, lint"
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
      - name: "Build back end Docker container"
        run:  docker-compose build back-end
      - name: "Run tests"
        run:  docker-compose run back-end pytest
      - name: "Check code style"
        run:  docker-compose run back-end scripts/run-yapf.sh
      - name: "Lint code"
        run:  docker-compose run back-end scripts/run-pylint.sh
